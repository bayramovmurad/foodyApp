
import ProductsComponent from '../../../shared/adminComponents/ProductsComponent/ProductsComponent';
import SideBar from '../../../shared/adminComponents/SideBar/SideBar';
import Header from '../../../shared/adminComponents/Header/Header';
import Dropdown from '../../../shared/adminComponents/Dropdown';

import { getProductsAdmin , deleteProductAdmin } from '../../../services/index'
import React, { FC, useEffect, useState } from 'react';
import { NextPage } from 'next';
import Head from 'next/head';

interface Product {
  id: number;
  name: string;
  description: string;
  price: number;
  img_url: string;
}

const AdminProducts: NextPage = () => {
  const [activeData, setActiveData] = useState<Product[]>([]);

  const renderData = async () => {
      const data = await getProductsAdmin()
      console.log(data);
      
      setActiveData(data?.data.result.data);
  }

  const deleteProduct = async (id: number | string) => {
      // const response = await deleteProductAdmin(id)
      // console.log(response);
  };

  const filterProduct = (title: Product): void => {
      // let newData = activeData.filter((item) => item.restaurantName == title)
      // setActiveData(newData)
      console.log(title);
  }

  useEffect(() => {
    renderData()
  },[])

  return (
    <div>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <div className="px-[19px] min-h-screen bg-[#1E1E30] relative">
        <Header />
        <div className="flex gap-x-4">
          <SideBar />
          <div className="flex flex-col w-full">
            <div className="flex justify-between px-8 py-5 bg-[#27283c] mb-[52px] rounded-lg">
              <h3 className="text-[#C7C7C7] text-xl font-semibold">Products</h3>
              <Dropdown
                filterItems={filterProduct}
                items={["Papa Johns", "Kfc", "Mc Donalds", "Burger King"]}
                className={"flex bg-[#5A5B70] rounded-[14px] px-[18px] py-2 relative w-[199px]"}
              />
            </div>
            <div className="flex gap-x-10 gap-y-10 flex-wrap justify-between">
              {
                activeData?.map((item) => (
                  <ProductsComponent
                    key={item.id}
                    detail={item}
                    deleteProduct={deleteProduct}
                  />
                ))
              }
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default AdminProducts;








